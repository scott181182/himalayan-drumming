fragment LocationComplete on LatLng {
    id
    latitude
    longitude
}
fragment PersonInVillageInContext on PersonInVillage {
    person { id name }
    village { id name }

    description
}
fragment PersonOnFileInContext on PersonOnFile {
    notes
    instrument

    person { id name }
    file { id name }
}

fragment FileEntryInContext on FileEntry {
    id
    name
    url

    type
    parentId

    location { ...LocationComplete }

    associatedFiles { id name }
    people { ...PersonOnFileInContext }
    tags
}
fragment PersonInContext on Person {
    id
    name
    avatarUrl

    birthdate
    education
    notes

    gender
    caste

    files { ...PersonOnFileInContext }
    parent {
        id name
    }
    villages { ...PersonInVillageInContext }
}

fragment VillageInContext on Village {
    id
    name
    temples
    divinities
    rituals
    notes

    location { ...LocationComplete }
    people { ...PersonInVillageInContext }
}


query GetFullContext {
    fileEntries { ...FileEntryInContext }
    people { ...PersonInContext }
    villages { ...VillageInContext }
}

query GetPartialContext(
    $fileIds: [ID!]!,
    $personIds: [ID!]!,
    $villageIds: [ID!]!,
) {
    fileEntries(where: {
        id: { in: $fileIds }
    }) {
        ...FileEntryInContext
    }
    people(where: {
        id: { in: $personIds }
    }) {
        ...PersonInContext
    }
    villages(where: {
        id: { in: $villageIds }
    }) {
        ...VillageInContext
    }
}

query GetAllTags {
    tags
}

query GetAllEnums {
    tags
    castes
    genders
}
